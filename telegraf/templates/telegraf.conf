{% from "telegraf/map.jinja" import telegraf with context %}
{%- macro render_section(section) %}
    {%- for sec, options in telegraf[section].iteritems() %}
    {%- if section == 'main' %}
[{{ sec }}]
    {%- else %}
[[{{ section }}.{{ sec }}]]
    {%- endif %}
      {%- if options != None %}
      {%- for option, value in options.iteritems() %}
        {%- if value == 'true' or value == 'false' or value is number %}
  {{ option }} = {{ value }}
        {%- elif value is not string %}
  {{ option }} = [{{ '\"' + value|join('\", \"') + '\"' }}]
        {%- else %}
  {{ option }} = "{{ value }}"
        {%- endif %}
      {%- endfor %}
      {%- endif %}
    {% endfor %}
{%- endmacro -%}
# Telegraf configuration

# Telegraf is entirely plugin driven. All metrics are gathered from the
# declared inputs, and sent to the declared outputs.

# Plugins must be declared in here to be active.
# To deactivate a plugin, comment out the name and any variables.

# Use 'telegraf -config telegraf.conf -test' to see what metrics a config
# file would generate.

{{ render_section('main') }}

###############################################################################
#                                  OUTPUTS                                    #
###############################################################################
{{ render_section('outputs') }}
###############################################################################
#                                  INPUTS                                     #
###############################################################################
{{ render_section('inputs') }}
